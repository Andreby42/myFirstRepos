<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yinlian.wssc.web.mapper.VGroupShopMapper">
	<resultMap id="BaseResultMap" type="com.yinlian.wssc.web.po.VGroupShop">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		<result column="id" jdbcType="INTEGER" property="id" />
		<result column="imgurl" jdbcType="VARCHAR" property="imgurl" />
		<result column="sid" jdbcType="INTEGER" property="sid" />
		<result column="title" jdbcType="VARCHAR" property="title" />
		<result column="endtime" jdbcType="TIMESTAMP" property="endtime" />
		<result column="starttime" jdbcType="TIMESTAMP" property="starttime" />
		<result column="isower" jdbcType="INTEGER" property="isower" />
		<result column="num" jdbcType="INTEGER" property="num" />
		<result column="pnum" jdbcType="INTEGER" property="pnum" />
		<result column="price" jdbcType="DOUBLE" property="price" />
		<result column="yprice" jdbcType="DOUBLE" property="yprice" />
		<result column="auditing" jdbcType="INTEGER" property="auditing" />
		<result column="state" jdbcType="INTEGER" property="state" />
		<result column="ynum" jdbcType="INTEGER" property="ynum" />
		<result column="sname" jdbcType="VARCHAR" property="sname" />
		<result column="cname" jdbcType="VARCHAR" property="cname" />
		<result column="cid" jdbcType="INTEGER" property="cid" />
	</resultMap>
	<resultMap extends="BaseResultMap" id="ResultMapWithBLOBs"
		type="com.yinlian.wssc.web.po.VGroupShop">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		<result column="depict" jdbcType="LONGVARCHAR" property="depict" />
	</resultMap>
	<sql id="Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		id, imgurl, sid, title, endtime, starttime, isower, num, pnum, price,
		yprice, auditing,
		state, ynum, sname, cname, cid
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		depict
	</sql>
	<select id="selectByExampleWithBLOBs" parameterType="com.yinlian.wssc.web.po.VGroupShopExample"
		resultMap="ResultMapWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from v_group_shop
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<select id="selectByExample" parameterType="com.yinlian.wssc.web.po.VGroupShopExample"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		from v_group_shop
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<delete id="deleteByExample" parameterType="com.yinlian.wssc.web.po.VGroupShopExample">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		delete from v_group_shop
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete>
	<insert id="insert" parameterType="com.yinlian.wssc.web.po.VGroupShop">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		insert into v_group_shop (id, imgurl, sid,
		title, endtime, starttime,
		isower, num, pnum,
		price, yprice, auditing,
		state, ynum, sname,
		cname,
		cid, depict
		)
		values (#{id,jdbcType=INTEGER},
		#{imgurl,jdbcType=VARCHAR},
		#{sid,jdbcType=INTEGER},
		#{title,jdbcType=VARCHAR}, #{endtime,jdbcType=TIMESTAMP},
		#{starttime,jdbcType=TIMESTAMP},
		#{isower,jdbcType=INTEGER},
		#{num,jdbcType=INTEGER},
		#{pnum,jdbcType=INTEGER},
		#{price,jdbcType=DOUBLE}, #{yprice,jdbcType=DOUBLE},
		#{auditing,jdbcType=INTEGER},
		#{state,jdbcType=INTEGER},
		#{ynum,jdbcType=INTEGER},
		#{sname,jdbcType=VARCHAR},
		#{cname,jdbcType=VARCHAR}, #{cid,jdbcType=INTEGER},
		#{depict,jdbcType=LONGVARCHAR}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.yinlian.wssc.web.po.VGroupShop">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		insert into v_group_shop
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="imgurl != null">
				imgurl,
			</if>
			<if test="sid != null">
				sid,
			</if>
			<if test="title != null">
				title,
			</if>
			<if test="endtime != null">
				endtime,
			</if>
			<if test="starttime != null">
				starttime,
			</if>
			<if test="isower != null">
				isower,
			</if>
			<if test="num != null">
				num,
			</if>
			<if test="pnum != null">
				pnum,
			</if>
			<if test="price != null">
				price,
			</if>
			<if test="yprice != null">
				yprice,
			</if>
			<if test="auditing != null">
				auditing,
			</if>
			<if test="state != null">
				state,
			</if>
			<if test="ynum != null">
				ynum,
			</if>
			<if test="sname != null">
				sname,
			</if>
			<if test="cname != null">
				cname,
			</if>
			<if test="cid != null">
				cid,
			</if>
			<if test="depict != null">
				depict,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="imgurl != null">
				#{imgurl,jdbcType=VARCHAR},
			</if>
			<if test="sid != null">
				#{sid,jdbcType=INTEGER},
			</if>
			<if test="title != null">
				#{title,jdbcType=VARCHAR},
			</if>
			<if test="endtime != null">
				#{endtime,jdbcType=TIMESTAMP},
			</if>
			<if test="starttime != null">
				#{starttime,jdbcType=TIMESTAMP},
			</if>
			<if test="isower != null">
				#{isower,jdbcType=INTEGER},
			</if>
			<if test="num != null">
				#{num,jdbcType=INTEGER},
			</if>
			<if test="pnum != null">
				#{pnum,jdbcType=INTEGER},
			</if>
			<if test="price != null">
				#{price,jdbcType=DOUBLE},
			</if>
			<if test="yprice != null">
				#{yprice,jdbcType=DOUBLE},
			</if>
			<if test="auditing != null">
				#{auditing,jdbcType=INTEGER},
			</if>
			<if test="state != null">
				#{state,jdbcType=INTEGER},
			</if>
			<if test="ynum != null">
				#{ynum,jdbcType=INTEGER},
			</if>
			<if test="sname != null">
				#{sname,jdbcType=VARCHAR},
			</if>
			<if test="cname != null">
				#{cname,jdbcType=VARCHAR},
			</if>
			<if test="cid != null">
				#{cid,jdbcType=INTEGER},
			</if>
			<if test="depict != null">
				#{depict,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<select id="countByExample" parameterType="com.yinlian.wssc.web.po.VGroupShopExample"
		resultType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		select count(*) from v_group_shop
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
	<update id="updateByExampleSelective" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		update v_group_shop
		<set>
			<if test="record.id != null">
				id = #{record.id,jdbcType=INTEGER},
			</if>
			<if test="record.imgurl != null">
				imgurl = #{record.imgurl,jdbcType=VARCHAR},
			</if>
			<if test="record.sid != null">
				sid = #{record.sid,jdbcType=INTEGER},
			</if>
			<if test="record.title != null">
				title = #{record.title,jdbcType=VARCHAR},
			</if>
			<if test="record.endtime != null">
				endtime = #{record.endtime,jdbcType=TIMESTAMP},
			</if>
			<if test="record.starttime != null">
				starttime = #{record.starttime,jdbcType=TIMESTAMP},
			</if>
			<if test="record.isower != null">
				isower = #{record.isower,jdbcType=INTEGER},
			</if>
			<if test="record.num != null">
				num = #{record.num,jdbcType=INTEGER},
			</if>
			<if test="record.pnum != null">
				pnum = #{record.pnum,jdbcType=INTEGER},
			</if>
			<if test="record.price != null">
				price = #{record.price,jdbcType=DOUBLE},
			</if>
			<if test="record.yprice != null">
				yprice = #{record.yprice,jdbcType=DOUBLE},
			</if>
			<if test="record.auditing != null">
				auditing = #{record.auditing,jdbcType=INTEGER},
			</if>
			<if test="record.state != null">
				state = #{record.state,jdbcType=INTEGER},
			</if>
			<if test="record.ynum != null">
				ynum = #{record.ynum,jdbcType=INTEGER},
			</if>
			<if test="record.sname != null">
				sname = #{record.sname,jdbcType=VARCHAR},
			</if>
			<if test="record.cname != null">
				cname = #{record.cname,jdbcType=VARCHAR},
			</if>
			<if test="record.cid != null">
				cid = #{record.cid,jdbcType=INTEGER},
			</if>
			<if test="record.depict != null">
				depict = #{record.depict,jdbcType=LONGVARCHAR},
			</if>
		</set>
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExampleWithBLOBs" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		update v_group_shop
		set id = #{record.id,jdbcType=INTEGER},
		imgurl =
		#{record.imgurl,jdbcType=VARCHAR},
		sid =
		#{record.sid,jdbcType=INTEGER},
		title =
		#{record.title,jdbcType=VARCHAR},
		endtime =
		#{record.endtime,jdbcType=TIMESTAMP},
		starttime =
		#{record.starttime,jdbcType=TIMESTAMP},
		isower =
		#{record.isower,jdbcType=INTEGER},
		num =
		#{record.num,jdbcType=INTEGER},
		pnum = #{record.pnum,jdbcType=INTEGER},
		price = #{record.price,jdbcType=DOUBLE},
		yprice =
		#{record.yprice,jdbcType=DOUBLE},
		auditing =
		#{record.auditing,jdbcType=INTEGER},
		state =
		#{record.state,jdbcType=INTEGER},
		ynum =
		#{record.ynum,jdbcType=INTEGER},
		sname =
		#{record.sname,jdbcType=VARCHAR},
		cname =
		#{record.cname,jdbcType=VARCHAR},
		cid = #{record.cid,jdbcType=INTEGER},
		depict = #{record.depict,jdbcType=LONGVARCHAR}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExample" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Sep 08 
			15:33:50 CST 2016. -->
		update v_group_shop
		set id = #{record.id,jdbcType=INTEGER},
		imgurl =
		#{record.imgurl,jdbcType=VARCHAR},
		sid =
		#{record.sid,jdbcType=INTEGER},
		title =
		#{record.title,jdbcType=VARCHAR},
		endtime =
		#{record.endtime,jdbcType=TIMESTAMP},
		starttime =
		#{record.starttime,jdbcType=TIMESTAMP},
		isower =
		#{record.isower,jdbcType=INTEGER},
		num =
		#{record.num,jdbcType=INTEGER},
		pnum = #{record.pnum,jdbcType=INTEGER},
		price = #{record.price,jdbcType=DOUBLE},
		yprice =
		#{record.yprice,jdbcType=DOUBLE},
		auditing =
		#{record.auditing,jdbcType=INTEGER},
		state =
		#{record.state,jdbcType=INTEGER},
		ynum =
		#{record.ynum,jdbcType=INTEGER},
		sname =
		#{record.sname,jdbcType=VARCHAR},
		cname =
		#{record.cname,jdbcType=VARCHAR},
		cid = #{record.cid,jdbcType=INTEGER}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<sql id="criteria_query">
		<where>
			<if test="criteria.title!=null and criteria.title!=''">
				and title like '%${criteria.title}%'
			</if>
			<if test="criteria.sname!=null and criteria.sname!=''">
				and sname like '%${criteria.sname}%'
			</if>
			<if test="criteria.cid != null and criteria.cid &gt;0 ">
				and cid=#{criteria.cid}
			</if>
			<if test="criteria.isower != null and criteria.isower >=0 ">
				and isower=#{criteria.isower}
			</if>
			<if test="criteria.shopid != null and criteria.shopid >0 ">
				and sid=#{criteria.shopid}
			</if>
			<if test="criteria.state != null and criteria.state >=0 ">
				and state=#{criteria.state}
			</if>
			<if test="criteria.auditing != null and criteria.auditing >=0 ">
				and auditing=#{criteria.auditing}
			</if>
			<if test="criteria.startFrom != null ">
				and DATEDIFF(starttime,#{criteria.startFrom} )<![CDATA[ >= ]]>0
			</if>
			<if test="criteria.startTo != null ">
				and DATEDIFF(starttime,#{criteria.startTo} )<![CDATA[ <= ]]>0
			</if>
			<if test="criteria.endFrom != null ">
				and DATEDIFF(endtime,#{criteria.endFrom} )<![CDATA[ >= ]]>0
			</if>
			<if test="criteria.endTo != null ">
				and DATEDIFF(endtime,#{criteria.endTo} )<![CDATA[ <= ]]>0
			</if>
		</where>
	</sql>
	<select id="getListPage" parameterType="com.yinlian.wssc.web.util.PageBeanUtil"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from v_group_shop
		<if test="criteria != null ">
			<include refid="criteria_query" />
		</if>
		<if test="criteria.orderByClause != null and criteria.orderByClause != '' ">
			order by ${criteria.orderByClause} ${criteria.sort}
		</if>
	</select>
	<sql id="criteria_api_query">
		<where>
		  TIMEDIFF (endtime,NOW())<![CDATA[>=]]>0 and TIMEDIFF (starttime,NOW())<![CDATA[<=]]>0 
			<if test="criteria.auditing != null and criteria.auditing >0 ">
				and auditing=#{criteria.auditing}
			</if>
			<if test="criteria.state != null and criteria.state >0 ">
				and state=#{criteria.state}
			</if>

		</where>
	</sql>
	<select id="getApiListPage" parameterType="com.yinlian.wssc.web.util.PageBeanUtil"
		resultType="com.yinlian.api.dto.Groupbuyinfo_Api_Dto">
		select
		<include refid="Base_Column_List" />
		from v_group_shop
		<if test="criteria != null ">
			<include refid="criteria_api_query" />
		</if>
		<if test="criteria.orderByClause != null and criteria.orderByClause != '' ">
			order by ${criteria.orderByClause} ${criteria.sort}
		</if>
	</select>

	<select id="getById" resultType="com.yinlian.wssc.web.po.VGroupShop">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List"></include>
		from v_group_shop where id=#{0}
	</select>
</mapper>